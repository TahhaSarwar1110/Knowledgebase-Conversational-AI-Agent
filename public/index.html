<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TechSurge AI — SurgeBot</title>
  <meta name="description" content="TechSurge AI — SurgeBot: Enterprise knowledge assistant." />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg-1:#071422;
      --muted:#94a3b8;
      --accent1:#7c3aed;
      --accent2:#06b6d4;
      --card-radius:14px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:"Inter",system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
      background:
        radial-gradient(1000px 400px at 10% 20%, rgba(124,58,237,0.11), transparent 8%),
        radial-gradient(800px 300px at 90% 80%, rgba(6,182,212,0.05), transparent 10%),
        linear-gradient(180deg,var(--bg-1) 0%, #05131a 100%);
      color:#e6eef8;
      -webkit-font-smoothing:antialiased;
      padding:36px 18px;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .site{ width:100%; max-width:1200px; display:grid; grid-template-columns: 1fr 420px; gap:28px; }
    .hero{ padding:40px; border-radius:18px; background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.015)); border:1px solid rgba(255,255,255,0.04); box-shadow:0 10px 30px rgba(2,6,23,0.6); overflow:hidden; }
    .brand{ display:flex; gap:16px; align-items:center; }
    .logo{ width:64px; height:64px; border-radius:12px; background: linear-gradient(90deg,var(--accent1),var(--accent2)); display:flex;align-items:center;justify-content:center;font-weight:800;color:#fff; font-size:18px; box-shadow: 0 8px 22px rgba(124,58,237,0.18); }
    h1{ margin:6px 0 6px; font-size:34px; line-height:1.02; letter-spacing:-0.4px; }
    .tagline{ color:var(--muted); margin-top:6px; }
    .cta-row{ margin-top:22px; display:flex; gap:12px; align-items:center; }
    .btn-primary{ padding:12px 18px; border-radius:12px; background: linear-gradient(90deg,var(--accent1),var(--accent2)); border:none; color:white; font-weight:600; cursor:pointer; box-shadow:0 10px 30px rgba(99,102,241,0.12); transition: transform .16s ease; }
    .btn-primary:hover{ transform:translateY(-3px) }
    .btn-ghost{ padding:10px 14px; border-radius:12px; background:transparent; color:var(--muted); border:1px solid rgba(255,255,255,0.03); cursor:pointer; }
    .features{ margin-top:26px; display:grid; grid-template-columns: repeat(2,minmax(0,1fr)); gap:12px; }
    .feature{ background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.03); padding:14px; border-radius:10px; }
    .feature h4{ margin:0 0 6px; font-size:14px; } .feature p{ margin:0; color:var(--muted); font-size:13px; }
    .preview{ padding:16px; border-radius:16px; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.03); display:flex; flex-direction:column; gap:12px; }
    .small{ color:var(--muted); font-size:13px; }
    .chat-button{ position:fixed; right:26px; bottom:26px; z-index:1200; display:flex; align-items:center; gap:12px; cursor:pointer; }
    .chat-fab{ width:64px; height:64px; border-radius:18px; background: linear-gradient(135deg,var(--accent1),var(--accent2)); display:flex; align-items:center; justify-content:center; color:white; font-weight:800; font-size:18px; box-shadow:0 10px 30px rgba(99,102,241,0.25); transition: transform .16s ease; }
    .chat-fab:hover{ transform:translateY(-6px) }
    .chat-label{ background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02)); border:1px solid rgba(255,255,255,0.03); padding:8px 12px; border-radius:999px; color:white; font-weight:600; box-shadow:0 8px 24px rgba(2,6,23,0.45); transform:translateX(10px); opacity:0; pointer-events:none; transition: transform .22s ease, opacity .22s ease; }
    .chat-button:hover .chat-label{ transform:translateX(0); opacity:1; pointer-events:auto; }
    .chat-panel{
      position: fixed;
      right: 26px;
      bottom: 102px;
      width: 380px;
      max-width: calc(100% - 48px);
      border-radius: 14px;
      overflow: hidden;
      z-index: 1300;
      background:
        radial-gradient(1000px 400px at 10% 20%, rgba(124,58,237,0.11), transparent 8%),
        radial-gradient(800px 300px at 90% 80%, rgba(6,182,212,0.05), transparent 10%),
        linear-gradient(180deg,var(--bg-1) 0%, #05131a 100%);
      border: 1px solid rgba(255,255,255,0.03);
      box-shadow: 0 20px 60px rgba(2, 6, 23, 0.7);
      transform-origin: bottom right;
      transform: translateY(12px) scale(.98);
      opacity: 0;
      pointer-events: none;
      transition: transform .22s cubic-bezier(.2,.9,.3,1), opacity .18s ease;
    }
    .chat-panel.open{ transform: translateY(0) scale(1); opacity:1; pointer-events:auto; }
    .chat-header{ padding:14px; display:flex; gap:12px; align-items:center; border-bottom:1px solid rgba(255,255,255,0.03); }
    .avatar{ width:44px; height:44px; border-radius:10px; background: linear-gradient(90deg,var(--accent1),var(--accent2)); display:flex; align-items:center; justify-content:center; color:#fff; font-weight:800; }
    .meta h3{ margin:0; font-size:15px } .meta p{ margin:2px 0 0; font-size:12px; color:var(--muted) }
    .chat-body{ max-height:420px; overflow:auto; padding:14px; display:flex; flex-direction:column; gap:10px; background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00)); }
    .msg{ display:flex; gap:10px; align-items:flex-end; max-width:100%; }
    .msg.user{ justify-content:flex-end; }
    .bubble{ padding:10px 12px; border-radius:12px; max-width:78%; font-size:14px; line-height:1.35; white-space:pre-wrap; box-shadow:0 6px 18px rgba(2,6,23,0.45); }
    .msg.bot .bubble{ background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.03); color:#e9f0ff; }
    .msg.user .bubble{ background: linear-gradient(90deg,var(--accent1),var(--accent2)); color:white; border-radius:14px; }
    .meta-ts{ font-size:11px; color:var(--muted); margin-top:6px; }
    .typing{ display:inline-block; height:10px; width:36px; border-radius:999px; background:rgba(255,255,255,0.06); position:relative; overflow:hidden; }
    .typing span{ position:absolute; height:100%; width:8px; border-radius:50%; background:rgba(255,255,255,0.9); left:6px; animation: blink 1s infinite ease-in-out; opacity:0.95; }
    .typing span:nth-child(2){ left:14px; animation-delay:.12s } .typing span:nth-child(3){ left:22px; animation-delay:.24s }
    @keyframes blink{ 0%{ transform: translateY(0); opacity:0.3 } 50%{ transform: translateY(-4px); opacity:1 } 100%{ transform: translateY(0); opacity:0.3 } }
    .chat-input{ display:flex; gap:8px; padding:12px; border-top:1px solid rgba(255,255,255,0.03); background: linear-gradient(180deg, rgba(255,255,255,0.00), rgba(255,255,255,0.01)); }
    .chat-input input{ flex:1; padding:10px 12px; border-radius:10px; border:1px solid rgba(255,255,255,0.04); background: rgba(255,255,255,0.02); color:inherit; outline:none; font-size:14px; }
    .chat-input button{ padding:10px 14px; border-radius:10px; border:none; background:linear-gradient(90deg,var(--accent2),var(--accent1)); color:white; cursor:pointer; font-weight:600; }
    .small-muted{ font-size:12px; color:var(--muted); }
    @media (max-width:980px){ .site{ grid-template-columns:1fr } .chat-panel{ right:18px; bottom:92px; width:92%; } }
  </style>
</head>
<body>
  <div class="site" role="main">
    <section class="hero" aria-labelledby="hero-title">
      <div class="brand">
        <div class="logo">TS</div>
        <div>
          <div style="display:flex; gap:6px; align-items:center;">
            <div style="font-size:12px; color:var(--muted); font-weight:700; letter-spacing:1px;">TechSurge</div>
          </div>
          <div style="display:flex; gap:6px;">
            <h1 id="hero-title">TechSurge AI — Automate,Discover,Surge.</h1>
          </div>
          <p class="tagline">Enterprise knowledge automation for teams and clients who need fast, reliable answers from internal content and product docs.</p>
        </div>
      </div>

      <div class="cta-row">
        <button class="btn-primary" onclick="openChat()">Try SurgeBot</button>
        <button class="btn-ghost" onclick="scrollToFAQ()">Documentation</button>
      </div>

      <div class="features" style="margin-top:28px;">
        <div class="feature">
          <h4>Knowledge-first</h4>
          <p>Connect your docs, FAQs and databases so SurgeBot answers with context-aware precision.</p>
        </div>
        <div class="feature">
          <h4>Enterprise-grade security</h4>
          <p>Role-based access, audit logs and secure connectors for private data sources.</p>
        </div>
        <div class="feature">
          <h4>Fast responses</h4>
          <p>Engineered for low-latency lookups and confident answers.</p>
        </div>
        <div class="feature">
          <h4>Integrations</h4>
          <p>Slack, Email, CRMs and webhook-ready for automations.</p>
        </div>
      </div>

      <div style="margin-top:26px;">
        <p class="small-muted">Trusted by product teams, knowledge managers, and customer success.</p>
      </div>
    </section>

    <aside class="preview" aria-labelledby="preview-title">
      <div class="top" style="display:flex; justify-content:space-between; align-items:center;">
        <div>
          <div style="font-weight:700; font-size:14px">SurgeBot (Demo)</div>
          <div class="small">Live knowledge assistant — click the widget to chat</div>
        </div>
        <div style="text-align:right;">
          <div style="font-weight:800; font-size:20px">SurgeBot</div>
          <div class="small-muted">AI • Knowledge • Assist</div>
        </div>
      </div>

      <div style="padding:12px; border-radius:12px; background:rgba(255,255,255,0.02); border:1px solid rgba(255,255,255,0.03)">
        <div style="font-size:13px; color:var(--muted); margin-bottom:8px;">Live preview</div>
        <div style="display:flex; gap:8px; align-items:center;">
          <div style="flex:1">
            <div style="height:8px; width:100%; background:rgba(255,255,255,0.03); border-radius:6px; overflow:hidden;"><div style="height:100%; width:50%; background:linear-gradient(90deg,var(--accent1),var(--accent2));"></div></div>
          </div>
          <div style="font-size:12px; color:var(--muted)">Response time: <strong>~180ms</strong></div>
        </div>
      </div>

      <div style="margin-top:auto; font-size:13px; color:var(--muted);">
       <strong style="display:block; color:#fff; margin-bottom:6px">Why Choose SurgeBot?</strong>
       <div>
       💬 Human-like responses<br>
       ⚙️ Integrates with your website in minutes<br>
      🔒 Secure — your data stays private<br>
      🚀 Boost customer satisfaction instantly
      </div>
      </div>
    </aside>
  </div>

  <!-- Floating chat button -->
  <div class="chat-button" aria-hidden="false">
    <div class="chat-label">Chat with SurgeBot</div>
    <div class="chat-fab" id="chatFab" title="Open SurgeBot" role="button" aria-pressed="false" onclick="toggleChat()">🤖</div>
  </div>

  <!-- Chat panel -->
  <div class="chat-panel" id="chatPanel" role="dialog" aria-modal="false" aria-label="SurgeBot chat">
    <div class="chat-header">
      <div class="avatar">SB</div>
      <div class="meta">
        <h3>SurgeBot</h3>
        <p>Knowledge assistant — powered by TechSurge AI</p>
      </div>
      <div style="display:flex; gap:8px; align-items:center;">
        <button class="btn-ghost" id="minimizeBtn" title="Minimize" onclick="toggleChat()">_</button>
      </div>
    </div>

    <div class="chat-body" id="chatBody" aria-live="polite"></div>

    <div class="chat-input">
      <input id="chatInput" type="text" placeholder="Ask anything from your knowledge base..." aria-label="Type your message" />
      <button id="sendBtn">Send</button>
    </div>
  </div>

<script>
  const API_URL = 'https://knowledgebase-conversational-ai-agent.onrender.com/chat';
  const sessionId = localStorage.getItem('surgebot_session') || (Math.random().toString(36).slice(2,10));
  localStorage.setItem('surgebot_session', sessionId);

  const chatPanel = document.getElementById('chatPanel');
  const chatFab = document.getElementById('chatFab');
  const chatBody = document.getElementById('chatBody');
  const chatInput = document.getElementById('chatInput');
  const sendBtn = document.getElementById('sendBtn');

  let open = false;
  let loading = false;

  const HISTORY_KEY = 'surgebot_history_v1';
  let history = JSON.parse(localStorage.getItem(HISTORY_KEY) || '[]');

  function renderHistory(){
    chatBody.innerHTML = '';
    history.forEach(item => appendMessage(item.role, item.text, false));
    scrollToBottom();
  }
  renderHistory();

  function toggleChat(){ open = !open; setOpenState(); }
  function openChat(){ open = true; setOpenState(); }
  function setOpenState(){
    if(open){
      chatPanel.classList.add('open');
      chatFab.setAttribute('aria-pressed','true');
      setTimeout(()=>chatInput.focus(), 220);
    } else {
      chatPanel.classList.remove('open');
      chatFab.setAttribute('aria-pressed','false');
    }
  }

  function appendMessage(role, text, save=true){
    const msg = document.createElement('div');
    msg.className = `msg ${role}`;
    const bubble = document.createElement('div');
    bubble.className = 'bubble';
    bubble.textContent = text;
    msg.appendChild(bubble);
    chatBody.appendChild(msg);
    if(save){ 
      history.push({role,text}); 
      localStorage.setItem(HISTORY_KEY, JSON.stringify(history)); 
    }
    scrollToBottom();
  }

  function scrollToBottom(){ chatBody.scrollTop = chatBody.scrollHeight; }

  async function sendMessage(){
    const rawText = chatInput.value.trim();
    if(!rawText || loading) return;
    chatInput.value = '';
    appendMessage('user', rawText);

    loading = true;

    const typing = document.createElement('div');
    typing.className = 'msg bot';
    typing.innerHTML = '<div class="bubble"><div class="typing"><span></span><span></span><span></span></div></div>';
    chatBody.appendChild(typing);
    scrollToBottom();

    try{
      const resp = await fetch(API_URL, {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify({ question: rawText, session_id: sessionId })
      });

      if(!resp.ok) throw new Error('Server responded ' + resp.status);
      let data = await resp.json();
      // Only use the 'response' field from backend
      const reply = data.response || "Sorry, no response from server.";

      chatBody.removeChild(typing);
      appendMessage('bot', reply, true);

    }catch(err){
      chatBody.removeChild(typing);
      appendMessage('bot', 'Error connecting to server. Try again.');
      console.error(err);
    } finally { loading=false; }
  }

  sendBtn.addEventListener('click', sendMessage);
  chatInput.addEventListener('keypress', e => { if(e.key==='Enter'){ sendMessage(); } });

  function scrollToFAQ(){ window.scrollTo({ top: document.body.scrollHeight, behavior:'smooth'}); }
</script>
</body>
</html>
